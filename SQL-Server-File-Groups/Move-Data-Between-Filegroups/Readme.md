# Инструменты для перемещения данных между файловыми группами

Оригинальный скрипт [взят отсюда](http://sql10.blogspot.com/2013/07/easily-move-sql-tables-between.html).
Может быть использован для переноса всех таблиц, индексов и LOB-данных из однй файловой группы в другую.

Перед использованием необходимо добавить храимую процедуру ["sp_MoveTablesToFileGroup"](sp_MoveTablesToFileGroup.sql) в базе "master".

# Примеры использования

- Сгенерироваь скрипт переноса всех таблиц, индексов, куч из всех схем данных в отдельную файловую группу.

```sql
 EXEC dbo.sp_MoveTablesToFileGroup
    @SchemaFilter = '%',   -- Фильтр по имени схемы (LIKE-оператор)
    @TableFilter  = '%',   -- Фильтр по имени таблицы (LIKE-оператор)
    @DataFileGroup = 'SECONDARY', -- Имя файловой группы назначения (куда переносим)
    @ClusteredIndexes = 1,   -- 1 означает "Перенести все кластерные индексы", то есть таблицы, где есть первичный ключ / кластерный индекс
    @SecondaryIndexes = 1,   -- 1 означает "Переместить все дополнительные индексы"
    @Heaps = 1,      -- 1 означает "Перенести все кучи" - то есть таблицы без кластерного индекса.
    @ProduceScript = 1    -- 1 - значит только сгенерировать скрипт, ничего выполнять не нужно
```
- Сгенерировать скрипт переноса  LOB-данных в отдельную файловую группу, а также перенести в отдельную файловую группу, только для схемы "TEST".

```sql
EXEC dbo.sp_MoveTablesToFileGroup
    @SchemaFilter = 'TEST',
    @TableFilter  = '%',
    @DataFileGroup = 'SECONDARY',
    @LobFileGroup =  'LOB_DATA',
    @ClusteredIndexes = 1,
    @SecondaryIndexes = 0,
    @Heaps = 0,
    @ProduceScript = 1
```
